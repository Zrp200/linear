#!/usr/bin/env ruby
require "linear1"
include Linear1
equation = proc do |index|
	begin
		eq = EQUATIONS.fetch(e = ARGV.shift.to_sym) do
	    		ARGV.unshift e.to_s
			Function
  		end	
	 	eq.find index
	rescue
		eq.build
	end
end
puts case ARGV.shift.to_sym
	when :graph
	  	puts "Graphing...."
	  	sleep 1
		Graph.new equation.call
	when :display then case ARGV.shift.to_sym
		when :slope then equation.call.slope
		when :y_intercept then equation.call.y_intercept
		when :power then equation.call.power
		when :equation then equation.call
		when :help, /-h/ then 'TODO'
	end
	when :execute
	  	puts "Executing...."
	  	sleep 1
		equation.call(1).execute ARGV.shift
	when :help, /-h/ then <<HELP 
$ linear1 [graph | display | help | execute]
Commands:
	graph - Graphs the given equation
	display - Displays a specific attribute of the given equation
	execute - Evaluates the given equation with the given value as x
	help - this message 
HELP
end
