#!/usr/bin/env ruby
require "linear1"
include Linear1
equation = ->(i) do 
	begin
		e = EQUATIONS[ARGV[i].to_sym]
		e.find i + 1
	rescue NoMethodError
		build = e.build
		raise if build == :testing
	end
end
puts case input
	when "graph" then Graph.new equation.call(0)
	when "display" then case input
		when "slope" then equation.call(0).slope
		when "y_intercept" then equation.call(0).y_intercept
		when "power" then equation.call(0).power
		when "equation" then equation.call(0)
		when "help", /-h/ then 'TODO'
	end
	when "execute"
		x = ARGV.shift
		equation.call(0).execute x
	when "help", /-h/ then <<HELP 
$ linear1 [graph | display | help | execute]
Commands:
	graph - Graphs the given equation
	display - Displays a specific attribute of the given equation
	execute - Evaluates the given equation with the given value as x
	help - this message 
HELP
end
