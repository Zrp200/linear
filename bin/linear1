#!/usr/bin/env ruby
require "linear1"
include Linear1
ARGV.map! {|a| Symbol(a)}
equation = proc do 
	begin
		e = EQUATIONS[ARGV.shift]
		e.find 0
	rescue NoMethodError
		raise unless STDIN.tty?
		e.build
	end
end
puts case ARGV.shift
	when :graph then Graph.new equation.call
	when :display then case ARGV.shift
		when :slope then equation.call.slope
		when :y_intercept then equation.call.y_intercept
		when :power then equation.call.power
		when :equation then equation.call
		when :help, /-h/ then 'TODO'
	end
	when :execute
		x = ARGV.shift
		puts x
		equation.call.execute x
	when :help, /-h/ then <<HELP 
$ linear1 [graph | display | help | execute]
Commands:
	graph - Graphs the given equation
	display - Displays a specific attribute of the given equation
	execute - Evaluates the given equation with the given value as x
	help - this message 
HELP
end
