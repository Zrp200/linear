#!/usr/bin/env ruby
require "linear1"
include Linear1
equation = proc do 
	e = ARGV.shift
	eq = EQUATIONS.fetch(e) do
		ARGV.unshift e
		begin
			print "Enter equation type: "
			EQUATIONS.fetch STDIN.gets.chomp
		rescue KeyError
			retry
		end
	end	
	eq.find 0
	rescue
		e.build
	end
end
puts case ARGV.shift.to_sym
	when :graph then Graph.new equation.call
	when :display then case ARGV.shift.to_sym
		when :slope then equation.call.slope
		when :y_intercept then equation.call.y_intercept
		when :power then equation.call.power
		when :equation then equation.call
		when :help, /-h/ then 'TODO'
	end
	when :execute
		x = ARGV.shift
		equation.call.execute x
	when :help, /-h/ then <<HELP 
$ linear1 [graph | display | help | execute]
Commands:
	graph - Graphs the given equation
	display - Displays a specific attribute of the given equation
	execute - Evaluates the given equation with the given value as x
	help - this message 
HELP
end
